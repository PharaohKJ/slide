## プライベート Docker## コンテナの運用について　2014-11-21 PhalanXware 加藤 真透--# 第一部## Docker とはなにか--### Docker とはなにか　　Docker社が開発するオープンソースのコンテナー管理ソフトウェアの1つ。　LXC(LinuxContainers)によりLinux上に隔離された環境を作り出し、元の環境に影響を及ぼさずにアプリケーションソフトの実行ができる。　OSやアプリケーションの導入の済みLinux環境を丸ごとイメージとして保存する機能がある。--### Docker Hub Registryとは　　https://registry.hub.docker.com/　Docker社自体が、上記URLで提供するサービスで、Dockerのイメージを使用するために、保存することのできるサービス。　基本的にはこれらのイメージは **public** で、誰でも利用することができる。--### Docker Hub Registry の問題点　　前述のとおり、基本的には **public** であるため、独自のアプリケーションや設定を組み込んだイメージを公開することになってしまう。　Docker社はサービスの利用に有料プランを設けており、そちらで **private** なリポジトリを提供している。　https://registry.hub.docker.com/plans/ を参照。以下抜粋- 1 Repository $0/Month- 10 Repository $12/Month- 50 Repository $50/Month--### 有料アカウント　- メリット - 初期構築時の状況・設定をそのまま使うことができる。 - イメージ保存のディスク容量を気にしなくて良い。　- デメリット - 利用するもの全てがインターネットを経由したDocker Hub Registry へのアクセスを必要とする。 - Docker Hub Registryの死活に左右される。 - 有料。--### Docker Registry の運用　　Docker社が、自分で Docker Hub Registryを運用できるように、Docker RegistryというDockerイメージを公開しており、これを使うことで、イメージを提供するサービスを作ることができる。--### Docker Registry　- メリット  - インターネットを経由しない。  - 無料- デメリット  - ディスク容量を使う--### Docker Registry セットアップ手順　　Docker Registryをデーモンモード動作させる。内部で5000番ポートで動作するので、外からも5000番ポートでアクセスできるように設定して起動。　```docker run -d -p 5000:5000 registry```--# 第二部## スケーラビリティの課題--### スケーラビリティの課題  + docker pull ボトルネック問題  + コンテナアップデート手法の煩雑問題### 問題解決手法の提案  + pre-push モデル    - メリット    - デメリット  + shared disk モデル    - メリット    - デメリット# まとめ